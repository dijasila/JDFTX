<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JDFTx: Getting started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('GettingStarted.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Getting started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md39"></a>
Running the code</h2>
<p>Now that you have a working jdftx executable (and optionally jdftx_gpu) in the directory &lt;path-to-JDFTx&gt;/build, add the directory <b>&lt;path-to-JDFTx&gt;/build</b> to your <a href="http://www.linfo.org/path_env_var.html">PATH variable</a>. You might also want to add the scripts directory <b>&lt;path-to-JDFTx&gt;</b>/jdftx/scripts (or <b>&lt;path-to-JDFTx&gt;/jdftx-git/jdftx/scripts</b>) to the PATH variable. Note that if you choose not to add these directories to your PATH, you should specify the full path to the jdftx executable (or scripts) when trying out the tutorials.</p>
<p>The command-line usage information can be retrieved using <b>jdftx -h</b>. Note that all command-line arguments follow the standard unix long/short option conventions. The typical usage of this program would be of the form: </p><pre class="fragment"> jdftx -i input.in -o output.out
</pre><p> The input file contains commands that setup and control the calculation. The commands in the input file are case-insensitive, and can be given in any order. <br  />
</p>
<p>The progress of the calculation is logged to the output file. If you want to see the output in the shell, and simultaneously log to file, use the form: </p><pre class="fragment"> jdftx -i input.in | tee output.out
</pre><p> The code can also be run without arguments, and the input can be typed from the command line. <br  />
 See <a class="el" href="Commands.html">Input file documentation</a> or the output of <b>jdftx -t</b> for the list of available input file commands with detailed documentation.</p>
<p>JDFTx provides the option to terminate calculations gracefully, with Ctrl-c. This command allows the user to decide if the program should quit immediately, or after the current iteration, or to ignore the command.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Running the code on compute clusters</h2>
<p>The basic invocation above is sufficient to take advantage of all the compute power of one computer. JDFTx will, by default, launch as many threads as cores on your computer.</p>
<p>You need to use MPI to run JDFTx over a cluster of computers. For example, if you have a cluster with two computers called node1 and node2 with 8 compute cores each, you should run JDFTx as </p><pre class="fragment"> mpirun -n 2 --host node1,node2 jdftx -c 8 -i input.in -o output.out
</pre><p> Note that the -c specification is optional if JDFTx will be the only program running on those computers. However, to play nice with other programs sharing the compute node, use -c to control the number of threads.</p>
<p>Most likely, you would want to run JDFTx on a compute cluster running a job scheduling system such as Torque/PBS or SLURM. For example, within SLURM, to run JDFTx on nNodes nodes with nCores cores per node, run <b>sbatch script.job</b> where script.job contains: </p><pre class="fragment"> #!/bin/bash
 #SBATCH -N nNodes (and any other flags your cluster requires)

 srun -n nNodes -c nCores jdftx -i input.in -o output.out
</pre><p> Sometimes you would want to run more processes than nodes. It might be more efficient to run one process per 'socket' or physical processor chip: </p><pre class="fragment"> #!/bin/bash
 #SBATCH -N nNodes

 srun -n nSockets -c nCoresPerSocket jdftx -i input.in -o output.out
</pre><p> where nSockets might be twice of nNodes for usual dual-processor compute nodes. Note that JDFTx will pick up the number of threads per process from -c specified to SLURM.</p>
<p>In principle, you could divide the allocated number of cores into processes and threads in any combination. However, JDFTx implements MPI parallelization only over k-points and certain liquid-degrees of freedom. Therefore, you should rarely use more nProcesses than the number of reduced k-points in your calculation (see nStates in the initialization section of the input file); see the <a class="el" href="BrillouinZone.html">Brillouin-zone sampling</a> tutorial for more details. Most often, you should use the fewest nProcesses and maximum nThreads (-c option) that accomodates your calculation over the available node configuration. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
