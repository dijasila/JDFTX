<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JDFTx: Metal surfaces</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="jdftx-55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JDFTx
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('MetalSurfaces.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Metal surfaces </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><center><table border="0">
<tr>
<td><div class="image">
<img src="Pt100.png" alt=""/>
</div>
 </td><td><div class="image">
<img src="Pt110.png" alt=""/>
</div>
 </td><td><div class="image">
<img src="Pt111.png" alt=""/>
</div>
 </td></tr>
<tr>
<td style="text-align:center"><b>Pt(100)</b> </td><td style="text-align:center"><b>Pt(110)</b> </td><td style="text-align:center"><b>Pt(111)</b> </td></tr>
</table>
</center><p>Constructing a slab-geometry calculation (specifically graphene) from graphite in the <a class="el" href="TwoDmaterials.html">Two-dimensional materials</a> tutorial was easy: graphite already consisted of distinct layers. This tutorial shows you how to manually set up single-crystal platinum surfaces of various orientations, starting from supercell transformations, and then shows examples of surface property calculations in vacuum and solution.</p>
<h2><a class="anchor" id="autotoc_md41"></a>
Geometry setup</h2>
<p>Let's start with the geometry of bulk platinum, written using explicit lattice vectors rather than the shorthand lattice name: </p><pre class="fragment">set aBy2 3.705   #a/2 in bohrs
lattice \
       0    ${aBy2} ${aBy2} \
    ${aBy2}    0    ${aBy2} \
    ${aBy2} ${aBy2}    0

ion Pt 0. 0. 0.  1
</pre><p> Note that the lattice vectors are in columns of the 3x3 matrix , and we have used variable substitution along with the set command (see <a class="el" href="Commands.html">Input file documentation</a>) to declare the lattice constant in one place.</p>
<p>We can construct a surface unit cell in three steps. First we transform the unit cell (construct a supercell) in a way that allows us to identify layers with the desired surface direction, so that we can cleave the material. Then we repeat this supercell along the surface normal direction till there is enough room for the desired number of atomic layers and the vacuum gap. Finally, we keep atoms from a desired number of layers and drop the rest to create a slab with two surfaces, separated by a vacuum gap along the third direction (which we will make non-periodic using slab-mode Coulomb truncation).</p>
<p>The setup for the three common low-index surfaces of platinum, (100), (110) and (111), are discussed in the following pages in detail:</p>
<ul>
<li><a class="el" href="Pt100.html">Pt(100) setup</a></li>
<li><a class="el" href="Pt110.html">Pt(110) setup</a></li>
<li><a class="el" href="Pt111.html">Pt(111) setup</a></li>
</ul>
<p>After following through these pages you will have x.lattice and x.ionpos files for each x in 100, 110 and 111.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Calculations</h2>
<p>Now that we have the geometry - lattice and fractional coordinates - of the surfaces, setting up the calculations is rather straightforward. We will run vacuum and solvated calculations for each surface, and our input files will closely resemble those in the <a class="el" href="SolvationMolecule.html">Solvation of molecules</a> tutorial; the differences for the slab geometry will be familiar from the <a class="el" href="TwoDmaterials.html">Two-dimensional materials</a> tutorial.</p>
<p>First we combine most of the setup in a common input file: </p><pre class="fragment">#Save the following to common.in:
ion-species GBRV/$ID_pbesol.uspp
elec-ex-corr gga-PBEsol
elec-cutoff 20 100

coulomb-interaction Slab 001
coulomb-truncation-embed 0 0 0

kpoint-folding 12 12 1
elec-smearing Fermi 0.01
electronic-SCF
#ionic-minimize nIterations 10  #Uncomment to enable geometry optimization
</pre><p> We will run a vacuum calculation starting from the geometry we set up: </p><pre class="fragment">#Save the following to Vacuum.in:
include common.in
include ${surface}.lattice
include ${surface}.ionpos
dump-name ${surface}-Vacuum.$VAR
dump End State IonicPositions
</pre><p> These surface calculations are expensive, and to speed them up, I have disabled geometry optimization in Common.in. (So by default, all the results will be at the geometry we set up initially.) You can optionally enable geometry optimization and rerun the calculations to see how much difference it makes.</p>
<p>We will then run a solvated calculation starting from the final vacuum geometry (same as initial, unless you enabled geometry optimization) and wavefunctions: </p><pre class="fragment">#Save the following to Solvated.in:
include common.in
include ${surface}.lattice
include ${surface}-Vacuum.ionpos
initial-state ${surface}-Vacuum.$VAR
dump End None

fluid LinearPCM
pcm-variant CANDLE
fluid-solvent H2O
fluid-cation Na+ 1.
fluid-anion F- 1.
</pre><p> As before, this sets up solvation in a 1M aqueous NaF electrolyte.</p>
<p>We can run all the necessary calculations using the script: </p><pre class="fragment">#!/bin/bash
for surface in 100 110 111; do
    export surface
    jdftx -i Vacuum.in | tee ${surface}-Vacuum.out
    jdftx -i Solvated.in | tee ${surface}-Solvated.out
done
</pre><p> Save the above to run.sh, give execute permissions using "chmod +x run.sh", and execute using "./run.sh". This will take a while (~ half hour on a laptop)!</p>
<p>Finally, let's analyze the total energies and electron chemical potentials (mu) of these calculations. We can calculate the formation energy of the surfaces (in vacuum and solution), by comparing against the energy of the bulk metal from the <a class="el" href="Metals.html">Metals</a> tutorial (scaled to the same number of atoms i.e. 5). The mu in vacuum is the work function, whereas the mu in solution is related to the electrode potential at which the surface is neutral, which is called the potential of zero charge (PZC) of the surface.</p>
<p>We can convert the absolute mu to an electrode potential relative to a reference such as the standard hydogen electrode (SHE) by knowing the absolute potential of the reference electrode: </p><pre class="fragment">V_SHE = - (mu - mu_SHE)
</pre><p> There is an overall negative sign due to differences in sign convention for electrode (reduction) potentials and electron chemical potentials. Experimentally, mu_SHE is calibrated to -4.44 eV. Alternately, we can calibrate mu_SHE by comparig theoretical calculations of the PZC of various metal surfaces against experimental measurements. We will use this approach, as it tends to cancel systematic errors in the solvation model. For the CANDLE solvation model, mu_SHE = -4.66 eV (from the CANDLE paper).</p>
<p>We can extract all these results from the output files and print them nicely using the script: </p><pre class="fragment">#!/bin/bash

Ebulk="-89.040956" #Bulk metal energy per atom

function parseOutputs()
{
    logFile="$1"
    awk "
        /R =/ {RstartLine=NR}
        NR==RstartLine+3 { Lz = \$4 }           #Height of unit cell
        /unit cell volume/ { A = \$NF*2/Lz}     #Surface area (top+bottom)
        /FillingsUpdate:/ { mu = \$3 }          #Electron chemical potential
        /IonicMinimize: Iter/ { Esurf = (\$5 - $Ebulk*5)/A }  #Surface energy
        END {
            eV = 1/27.2114;
            nm = 1/0.05291772;
            print Esurf/(eV/(nm*nm)), mu/eV     #Output with unit conversion
        }
    " $logFile
}

#Print header:
echo "Surface      Esurf [eV/nm^2]           Absolute mu [eV]     V_SHE"
echo "         Vacuum Solvated  Shift     Vacuum Solvated  Shift   [V]"

#Print results:
for surface in 100 110 111; do
    EmuVac="$(parseOutputs $surface-Vacuum.out)"
    EmuSol="$(parseOutputs $surface-Solvated.out)"
    echo -n "  $surface   "
    #Print extracted results and solvation differences:
    echo "$EmuVac $EmuSol" | awk '{
        printf("%7.2f %7.2f %7.2f   %7.2f %7.2f %7.2f %7.2f\n",
            $1, $3, $3-$1, $2, $4, $4-$2, -($4-(-4.68))) }'
done
</pre><p> Save the above to collectResults.sh, give execute permissions using "chmod +x collectResults.sh", and execute using "./collectResults.sh" to get the results:</p>
<center><table class="doxtable">
<tr>
<th rowspan="2">Surface </th><th colspan="3">E<sub>surf</sub> [eV/nm<sup>2</sup>] </th><th colspan="3">Absolute mu [eV] </th><th rowspan="2">V<sub>SHE</sub> [V] </th></tr>
<tr>
<th>Vacuum </th><th>Solvated </th><th>Shift </th><th>Vacuum </th><th>Solvated </th><th>Shift </th></tr>
<tr>
<td>(100) </td><td>13.96 </td><td>13.70 </td><td>-0.26 </td><td>-5.72 </td><td>-5.46 </td><td>0.26 </td><td>0.78 </td></tr>
<tr>
<td>(110) </td><td>14.85 </td><td>14.63 </td><td>-0.22 </td><td>-5.38 </td><td>-5.11 </td><td>0.28 </td><td>0.43 </td></tr>
<tr>
<td>(111) </td><td>11.22 </td><td>10.94 </td><td>-0.28 </td><td>-5.74 </td><td>-5.48 </td><td>0.26 </td><td>0.80 </td></tr>
</table>
</center><p>Note that the surface formation energies in vacuum follow the trend (111) &lt; (100) &lt; (110), indicating that (111) is most stable and (110) is least stable. This remains the case even in solvent: solvation reduces the formation energies of all three surfaces (stabilizes the surfaces), but only by a relatively small amount.</p>
<p>The chemical potentials (negative of work function in vacuum / PZC in solution) also show a similar trend (111) &lt;= (100) &lt; (110). Solvation shifts up the chemical potentials towards zero consistently by about 0.3 eV for all three surfaces.</p>
<p>Exercise: what happens with geometry optimization? How much do these results change? If you have issues with electronic-SCF convergence, try the stabler but slower electronic-minimize instead. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
